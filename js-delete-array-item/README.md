# JS删除数组的元素

* 循环对象
  
  1. `Object`
  2. `Array`

* 改变数组长度，元素位置的操作

  循环中改变数组长度，元素位置可能导致循环不按预期执行，需要引起注意。

  1. 删除元素
  2. 新增元素

* 循环方式

  1. `for(var i = 0, l = data.length; i < l; i++)`

     * 因为缓存了data的长度，理论上运行时性能更优。
     * 如果使用`splice`删除元素，会导致循环判断语句的使用过期数据，程序执行将不能达到预期效果。

  2. `for(var i = 0; i < data.length; i++)`

     * 只能对`Array`循环
     * 数组长度变动不影响循环行为

  3. `for in`

     * 循环开始时会缓存键名，所以循环中新增的键名/元素不会被遍历到，包括`push`、`arr[newIndex] = newValue`
     * 循环开始时会缓存键名，循环中删除的键名/元素也不会被遍历到
     * 如果循环对象是`Array`，因为键名会发生变动，如果同时有删除和新增元素的操作，则新增元素会被遍历到，但从键名看，是没有变动的

  4. `Array.forEach`

* 删除方式
  1. `delete`语法。

     * 删除的元素依然保留索引
     * 其它元素位置不变化
     * 数组长度不发生改变
     * 元素变成`<empty items>`，`<empty items>` 与 `null` 恒等，`JSON.stringify`调用`<empty items>`变成`null`

  2. `splice`方法。

     * 元素的索引不保留，当前索引变成下一个元素，依此类推
     * 其它元素位置发生变化，向前移动一个位置
     * 数组的长度发生改变，减1

  3. 元素赋值为`null`，同1。
  4. 元素赋值为`undefined`，同1，注意：`null`不等于`undefined`。

## 总结

* 使用 `delete`语法 和 **替换赋值** 的方式删除元素后可以使用 `filter` 方法过滤掉删除的元素，这个方法较为直观和易于理解。
* 如果循环内部会改变数组的长度，如有`splice`操作，则循环判断应该实时获取数组元素的长度，而不能使用缓存，同时需要在操作后更新`循环游标`。
* 如果是按指定索引进行删除，需要记录删除的元素的数量作为判断指定索引的偏移量，`指定索引-已经删除的元素的数量`为修正后的索引，同时删除后`循环游标`需要`-1`。
* 如果是循环中按元素内容进行删除，无需记录删除的数量，只需要在删除操作时动态更新`循环游标`。
